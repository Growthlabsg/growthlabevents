# QR Code Check-in Feature - GrowthLab Platform

## ğŸ¯ Overview
The GrowthLab platform now generates QR codes for event registrations. When attendees register for an event, they receive a unique QR code that can be scanned at check-in.

---

## ğŸ“± QR Code Generation

### Event Registration QR Code Format
```
event:eventId:registrationId:attendeeName:attendeeEmail
```

**Example:**
```
event:growthlab-1:reg-1234567890-abc123:John Doe:john.doe@example.com
```

### Components:
- **Type**: `event` (identifies this as an event registration QR code)
- **Event ID**: The unique event identifier
- **Registration ID**: Unique registration identifier generated by GrowthLab
- **Attendee Name**: Name of the registered attendee
- **Attendee Email**: Email of the registered attendee (optional)

---

## ğŸ« Ticket/Registration Page

### Access
After clicking "Register Now" on an event, users are redirected to:
**URL**: `/events/[eventId]/ticket`

### Features:
- âœ… **Registration Confirmation** - Success message
- âœ… **Event Details** - Date, time, location
- âœ… **Ticket Information** - Ticket type, price, registration ID
- âœ… **QR Code Display** - Large, scannable QR code
- âœ… **Download QR Code** - Save QR code as image
- âœ… **Attendee Information** - Name and email displayed

### Example Flow:
1. User clicks "Register Now" on `/events/growthlab-1`
2. Redirected to `/events/growthlab-1/ticket`
3. QR code is automatically generated and displayed
4. User can download or screenshot the QR code
5. QR code is used at event check-in

---

## âœ… Check-in Process

### Method 1: QR Code Scanner (Recommended)
1. Navigate to `/checkin` page
2. Click "Scan QR Code" mode
3. Allow camera access
4. Scan attendee's event registration QR code
5. System automatically:
   - Parses QR code
   - Validates event ID
   - Checks in attendee
   - Updates attendance list

### Method 2: Manual Entry (Host)
1. On event page, go to "Check-in Management" section
2. Enter QR code manually: `event:eventId:registrationId:name:email`
3. Click "Check In"
4. System processes check-in

### Method 3: Email Check-in (Fallback)
1. Enter attendee email address
2. System looks up registration
3. Checks in attendee

---

## ğŸ” QR Code Validation

The system validates QR codes to ensure:
- âœ… Correct format (starts with `event:`)
- âœ… Event ID matches current event
- âœ… Registration ID is valid
- âœ… Attendee information is present

**Error Handling:**
- Invalid format â†’ "Invalid QR code format"
- Wrong event â†’ "This QR code is for a different event"
- Already checked in â†’ "Attendee is already checked in"
- Not registered â†’ "Registration not found"

---

## ğŸ“‹ Testing the Feature

### Step 1: Register for Event
1. Go to: http://localhost:3000/events/growthlab-1
2. Click "Register Now"
3. You'll be redirected to the ticket page

### Step 2: View QR Code
- QR code is displayed on the ticket page
- Format: `event:growthlab-1:reg-[timestamp]-[random]:[name]:[email]`
- You can download it as an image

### Step 3: Test Check-in
**Option A: Using Check-in Page**
1. Go to: http://localhost:3000/checkin
2. Switch to "Manual Entry" mode
3. Copy the QR code value from ticket page
4. Paste and click "Check In"
5. âœ… Verify success message

**Option B: Using Event Check-in Management**
1. Go to: http://localhost:3000/events/growthlab-1
2. Scroll to "Check-in Management" section
3. Enter QR code value
4. Click "Check In"
5. âœ… Verify attendee appears in checked-in list

### Step 4: Verify Attendance
- Check "Checked In" count increases
- Attendee appears in "Checked In Attendees" list
- Check-in time is recorded

---

## ğŸ¬ Complete Demo Flow

### For Attendees:
1. **Browse Events** â†’ `/events`
2. **View Event** â†’ `/events/growthlab-1`
3. **Register** â†’ Click "Register Now"
4. **Get QR Code** â†’ `/events/growthlab-1/ticket`
5. **Save QR Code** â†’ Download or screenshot
6. **Bring to Event** â†’ Show QR code at entrance

### For Hosts/Organizers:
1. **Access Check-in** â†’ `/events/growthlab-1` (Check-in Management section)
2. **Scan QR Codes** â†’ Use `/checkin` page with camera
3. **Manual Entry** â†’ Enter QR code if scanning unavailable
4. **View Attendance** â†’ See real-time statistics and list
5. **Check-out** â†’ Mark attendees as checked out when they leave

---

## ğŸ”§ Technical Details

### QR Code Generation
- **Library**: Custom canvas-based QR code generator
- **Format**: Colon-separated values
- **Uniqueness**: Registration ID ensures uniqueness
- **Validation**: Event ID must match for check-in

### API Integration
```javascript
// Generate QR code
const qrCode = generateEventRegistrationQR(
  eventId,
  registrationId,
  attendeeName,
  attendeeEmail
);

// Parse QR code
const parsed = parseEventRegistrationQR(qrCode);
// Returns: { type: 'event', eventId, registrationId, attendeeName, attendeeEmail }
```

### Check-in API Call
```javascript
POST /api/events/{eventId}/checkin
{
  "qrCode": "event:growthlab-1:reg-123:John Doe:john@example.com",
  "registrationId": "reg-123",
  "attendeeName": "John Doe",
  "email": "john@example.com",
  "action": "checkin"
}
```

---

## ğŸ“± Mobile Experience

### For Attendees:
- QR code is large and scannable on mobile
- Can be saved to phone gallery
- Can be accessed from account anytime

### For Hosts:
- Check-in page is mobile-responsive
- Camera scanning works on mobile devices
- Manual entry is touch-friendly

---

## âœ¨ Features

âœ… **Automatic QR Generation** - Created when user registers  
âœ… **Unique Per Registration** - Each registration has unique QR code  
âœ… **Event-Specific** - QR codes are tied to specific events  
âœ… **Downloadable** - Can save QR code as image  
âœ… **Scannable** - Works with camera-based QR scanners  
âœ… **Validated** - System validates QR code format and event match  
âœ… **Real-time Updates** - Attendance updates immediately  
âœ… **Error Handling** - Clear error messages for invalid codes  

---

## ğŸ¯ Quick Test

### Generate Test QR Code:
1. Visit: http://localhost:3000/events/growthlab-1/ticket
2. You'll see a QR code like: `event:growthlab-1:reg-1234567890-abc:John Doe:john.doe@example.com`

### Test Check-in:
1. Copy the QR code value
2. Go to: http://localhost:3000/checkin
3. Paste in manual entry
4. Click "Check In"
5. âœ… Success!

---

**The QR check-in feature is now fully integrated into the GrowthLab platform! ğŸš€**

